<!DOCTYPE HTML>
<html lang="zh-tw" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Using Google Maps | SuperMap Online Tutorial</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.7">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="gitbook/style.css">
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-splitter/splitter.css">
        
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-tbfed-pagefooter/footer.css">
        
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    

        
    
    
    <link rel="next" href="./baidu.html" />
    
    
    <link rel="prev" href="./leaflet.html" />
    

        
    </head>
    <body>
        
        
    <div class="book"
        data-level="2.2"
        data-chapter-title="对接 Google Maps"
        data-filepath="google.md"
        data-basepath="."
        data-revision="Mon Jun 27 2016 10:25:53 GMT+0800 (中国标准时间)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
                
                <li>
                    <a href="http://www.supermapol.com/" target="blank" class="custom-link">SuperMap Online</a>
                </li>
            
            

            
            <li class="divider"></li>
            

            
    
        <li class="chapter " data-level="0" data-path="jsapi.html">
            
                
                    <a href="./jsapi.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction to JavaScript API Overview</a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="iclientforjs.html">
            
                
                    <a href="./iclientforjs.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Introduction to iClient for JavaScript</a>
            
            
        </li>
    
        <li class="chapter " data-level="2" data-path="index.html">
            
                
                    <a href="./index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Introduction to SuperMap iConnector</a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="leaflet.html">
            
                
                    <a href="./leaflet.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        Use Leaflet</a>
            
            
        </li>
    
        <li class="chapter active" data-level="2.2" data-path="google.html">
            
                
                    <a href="./google.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        Use Google Maps</a>
            
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="baidu.html">
            
                
                    <a href="./baidu.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.</b>
                        
                        Use Baidu Maps</a>
            
            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="amap.html">
            
                
                    <a href="./amap.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.</b>
                        
                        Use Amap</a>
            
            
        </li>
    

            </ul>
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">This book uses GitBook to mark down</a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i> <a href="./" >SuperMap Online Tutorial</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h4 id="&#x4F7F;&#x7528;iconnector&#x5BF9;&#x63A5;google&#x5730;&#x56FE;&#x5E94;&#x7528;">Use iConnector to Access Google Maps</h4>
<hr>
<!-- toc -->
<ul>
<li><a href="#iconnectorgooglejs%E7%AE%80%E4%BB%8B">Introduction to iConnectorGoogle.js</a></li>
<li><a href="#%E5%87%86%E5%A4%87%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83">Prepare Development Environment</a><ul>
<li><a href="#1-%E5%9F%BA%E4%BA%8Egoogle%E5%9C%B0%E5%9B%BE-javascript-api%E7%9A%84%E5%9C%B0%E5%9B%BE%E5%BA%94%E7%94%A8">1. Map Applications base on Google Maps JavaScript API</a></li>
<li><a href="#2-%E5%87%86%E5%A4%87supermap-gis%E6%9C%8D%E5%8A%A1">2. Prepare SuperMap GIS Service</a></li>
<li><a href="#3-supermap%E7%9A%84javascript-api">3. SuperMap JavaScript API</a></li>
</ul>
</li>
<li><a href="#%E7%A4%BA%E4%BE%8B1%EF%BC%9A%E5%9C%A8google%E5%9C%B0%E5%9B%BE%E4%B8%8A%E5%8F%A0%E5%8A%A0supermap%E5%88%86%E6%AE%B5%E4%B8%93%E9%A2%98%E5%9B%BE">Sample 1: Overlay Google Maps with SuperMap Ranges Thematic Map </a></li>
<li><a href="#%E7%A4%BA%E4%BE%8B2%EF%BC%9A%E5%9C%A8google%E5%9C%B0%E5%9B%BE%E4%B8%8A%E7%BB%98%E5%88%B6%E6%9D%A5%E8%87%AAsupermap%E7%9A%84geometry">Sample 2: Draw SuperMap Geometry on Google Maps</a></li>
</ul>
<!-- tocstop -->
<h4 id="iconnectorgooglejs&#x7B80;&#x4ECB;">Introduction to iConnectorGoogle.js</h4>
<p>If you have already developed your map application using Google Maps Javascript API, you can integrate SuperMap GIS services through iConnectorGoogle.js. For instance, you can overlay Google Maps with data published by SuperMap.</p>
<p>iConnectorGoogle.js is mainly used to overlay Google Maps with generic maps, thematic maps, query results, and spatial analysis results from SuperMap GIS services.</p>
<h4 id="&#x51C6;&#x5907;&#x5F00;&#x53D1;&#x73AF;&#x5883;">Prepare Development Environment</h4>
<h5 id="1-&#x57FA;&#x4E8E;google&#x5730;&#x56FE;-javascript-api&#x7684;&#x5730;&#x56FE;&#x5E94;&#x7528;">1. Map Applications base on Google Maps JavaScript API</h5>
<p>To use Google Maps online JavaScript API:</p>
<pre><code class="lang-JavaScript">    &lt;script src=<span class="hljs-string">&quot;https://maps.googleapis.com/maps/api/js?v=3.exp&amp;sensor=false&quot;</span>&gt;<span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
</span></code></pre>
<h5 id="2-&#x51C6;&#x5907;supermap-gis&#x670D;&#x52A1;">2. Prepare SuperMap GIS Service</h5>
<p>You can use REST GIS services from SuperMap iServer. For example: <a href="http://support.supermap.com.cn:8090/iserver/services/map-china400/rest/maps/China" target="_blank">http://support.supermap.com.cn:8090/iserver/services/map-china400/rest/maps/China</a></p>
<p>You can also host your data with SuperMap Online, and publish it as map service, e.g.:<a href="http://www.supermapol.com/iserver/services/map_China4003/rest/maps?key=IbooSg6gIBmhIRaesVgjSED0" target="_blank">http://www.supermapol.com/iserver/services/map_China4003/rest/maps?key=IbooSg6gIBmhIRaesVgjSED0</a>. For how to host and publish your data, please see: <a href="http://blog.supermapol.com/GettingStarted/PublishServices.html" target="_blank">Publish and Use GIS Service</a>.</p>
<p>Here we use the above REST service to demonstrate how to use iConnector and integrate SuperMap REST services with third-part map services.</p>
<p>To have an online GIS server, you can subscribe it from SuperMap Online, and publish your own GIS service.</p>
<h5 id="3-supermap&#x7684;javascript-api">3. SuperMap JavaScript API</h5>
<p>It has two parts: iClient for JavaScript and iConnectorGoogle.js:</p>
<pre><code class="lang-JavaScript">    &lt;script src=<span class="hljs-string">&quot;http://www.supermapol.com/resources/api/libs/SuperMap.Include.js&quot;</span>&gt;<span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">&quot;http://www.supermapol.com/resources/api/iconnector/iConnectorGoogle.js&quot;</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
</span></code></pre>
<h4 id="&#x793A;&#x4F8B;1&#xFF1A;&#x5728;google&#x5730;&#x56FE;&#x4E0A;&#x53E0;&#x52A0;supermap&#x5206;&#x6BB5;&#x4E13;&#x9898;&#x56FE;">Sample 1: Overlay Google Maps with SuperMap Ranges Thematic Map</h4>
<p><strong>Step 1 Initialize Google Maps</strong></p>
<p>Create a Google Maps window&ldquo;map-canvas&rdquo; and set the map center and default zoom level: map = new google.maps.Map(document.getElementById(&apos;map-canvas&apos;), mapOptions);</p>
<pre><code class="lang-JavaScript">    <span class="hljs-keyword">var</span> myLatlng = <span class="hljs-keyword">new</span> google.maps.LatLng(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
    <span class="hljs-keyword">var</span> mapOptions = {
        center: myLatlng,
        zoom: <span class="hljs-number">1</span>,
        streetViewControl: <span class="hljs-literal">true</span>,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = <span class="hljs-keyword">new</span> google.maps.Map(<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&apos;map-canvas&apos;</span>),
            mapOptions);
</code></pre>
<p><strong>Step 2 Create a SuperMap Ranges Thematic Map</strong></p>
<p>Create a SuperMap Ranges thematic map by using SuperMap.Include.js and based on the &quot;China_Province_R&quot; layer published by SuperMap REST.</p>
<pre><code class="lang-JavaScript">    <span class="hljs-keyword">var</span> themeService = <span class="hljs-keyword">new</span> SuperMap.REST.ThemeService(url, {eventListeners:{<span class="hljs-string">&quot;processCompleted&quot;</span>: themeCompleted, <span class="hljs-string">&quot;processFailed&quot;</span>: themeFailed}}),
        style1 = <span class="hljs-keyword">new</span> SuperMap.REST.ServerStyle({
            fillForeColor: <span class="hljs-keyword">new</span> SuperMap.REST.ServerColor(<span class="hljs-number">137</span>,<span class="hljs-number">203</span>,<span class="hljs-number">187</span>),
            lineColor: <span class="hljs-keyword">new</span> SuperMap.REST.ServerColor(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>),
            lineWidth: <span class="hljs-number">0.1</span>
        }),
        style2 = <span class="hljs-keyword">new</span> SuperMap.REST.ServerStyle({
            fillForeColor: <span class="hljs-keyword">new</span> SuperMap.REST.ServerColor(<span class="hljs-number">233</span>,<span class="hljs-number">235</span>,<span class="hljs-number">171</span>),
            lineColor: <span class="hljs-keyword">new</span> SuperMap.REST.ServerColor(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>),
            lineWidth: <span class="hljs-number">0.1</span>
        }),
        style3 = <span class="hljs-keyword">new</span> SuperMap.REST.ServerStyle({
            fillForeColor: <span class="hljs-keyword">new</span> SuperMap.REST.ServerColor(<span class="hljs-number">135</span>,<span class="hljs-number">157</span>,<span class="hljs-number">157</span>),
            lineColor: <span class="hljs-keyword">new</span> SuperMap.REST.ServerColor(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>),
            lineWidth: <span class="hljs-number">0.1</span>
        }),
        themeRangeIteme1 = <span class="hljs-keyword">new</span> SuperMap.REST.ThemeRangeItem({
            start: <span class="hljs-number">0</span>,
            end: <span class="hljs-number">500000000000</span>,
            style: style1
        }),
        themeRangeIteme2 = <span class="hljs-keyword">new</span> SuperMap.REST.ThemeRangeItem({
            start: <span class="hljs-number">500000000000</span>,
            end: <span class="hljs-number">1000000000000</span>,
            style: style2
        }),
        themeRangeIteme3 = <span class="hljs-keyword">new</span> SuperMap.REST.ThemeRangeItem({
            start: <span class="hljs-number">1000000000000</span>,
            end:  <span class="hljs-number">3000000000000</span>,
            style: style3
        }),
        themeRange = <span class="hljs-keyword">new</span> SuperMap.REST.ThemeRange({
            rangeExpression: <span class="hljs-string">&quot;SMAREA&quot;</span>,
            rangeMode: SuperMap.REST.RangeMode.EQUALINTERVAL,
            items: [themeRangeIteme1,themeRangeIteme2,themeRangeIteme3]
        }),
        themeParameters = <span class="hljs-keyword">new</span> SuperMap.REST.ThemeParameters({
            datasetNames: [<span class="hljs-string">&quot;China_Province_R&quot;</span>],
            dataSourceNames: [<span class="hljs-string">&quot;China400&quot;</span>],
            joinItems: <span class="hljs-literal">null</span>,
            themes: [themeRange]
        });
    themeService.processAsync(themeParameters);
</code></pre>
<p><strong>Step 3 Convert SuperMap Thematic Map and Overlay It with Google Maps</strong></p>
<p>Use iConnectorGoogle.js to overlay the thematic map created in Step 2 with the Google Maps created in Step 1.</p>
<pre><code class="lang-JavaScript">    <span class="hljs-keyword">if</span>(themeEventArgs.result.resourceInfo.id) {
        map.overlayMapTypes.insertAt(
                <span class="hljs-number">0</span>, SuperMap.Web.iConnector.Google.getLayer(url,{layersID:themeEventArgs.result.resourceInfo.id}));
    }
</code></pre>
<p><strong>Online Demo and Source Code Editing</strong></p>
<p>Here, you can access the source code and see the demo, also you can edit the source code to change the demo.</p>
<ul>
<li><a href="http://runjs.cn/detail/nk6mvwfi" target="_blank">Online Demo</a></li>
<li><a href="http://runjs.cn/code/nk6mvwfi" target="_blank">Source Code Editing</a></li>
</ul>
<h4 id="&#x793A;&#x4F8B;2&#xFF1A;&#x5728;google&#x5730;&#x56FE;&#x4E0A;&#x7ED8;&#x5236;&#x6765;&#x81EA;supermap&#x7684;geometry">Sample 2: Draw SuperMap Geometry on Google Maps</h4>
<p><strong>Step 1 Initialize POI </strong></p>
<p>Create a poi point and use iConnectorGoogle.js to transfer the point to myLatlng.</p>
<pre><code class="lang-JavaScript">    <span class="hljs-keyword">var</span> poi = {x:<span class="hljs-number">116.397</span>,y:<span class="hljs-number">39.913</span>};
    <span class="hljs-keyword">var</span> myLatlng = SuperMap.Web.iConnector.Google.transferPoint([poi],<span class="hljs-keyword">new</span> SuperMap.Projection(<span class="hljs-string">&quot;EPSG:4326&quot;</span>))[<span class="hljs-number">0</span>];
</code></pre>
<p><strong>Step 2 Set the POI Point as the Map Center</strong></p>
<pre><code class="lang-JavaScript">    <span class="hljs-keyword">var</span> mapOptions = {
        zoom: <span class="hljs-number">7</span>,
        center: myLatlng,
        mapTypeId: google.maps.MapTypeId.TERRAIN
    }
    <span class="hljs-keyword">var</span> map = <span class="hljs-keyword">new</span> google.maps.Map(<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&apos;map-canvas&apos;</span>), mapOptions);
</code></pre>
<p><strong>Step 3 Mark the POI Point on Map</strong></p>
<pre><code class="lang-JavaScript">    <span class="hljs-keyword">var</span> marker = <span class="hljs-keyword">new</span> google.maps.Marker({
        position: myLatlng,
        map: map
    });
</code></pre>
<p><strong>Step 4 Draw and Add a SuperMap Line</strong></p>
<ul>
<li>Use SuperMap iClient for JavaScript API to create a new line named &quot;line1&quot;</li>
</ul>
<pre><code class="lang-JavaScript">    <span class="hljs-keyword">var</span> points1 = [
        <span class="hljs-keyword">new</span> SuperMap.Geometry.Point(<span class="hljs-number">115</span>,<span class="hljs-number">40.5</span>),
        <span class="hljs-keyword">new</span> SuperMap.Geometry.Point(<span class="hljs-number">116.5</span>,<span class="hljs-number">41.5</span>),
        <span class="hljs-keyword">new</span> SuperMap.Geometry.Point(<span class="hljs-number">118</span>,<span class="hljs-number">40.5</span>)
    ];
    <span class="hljs-keyword">var</span> line1 = <span class="hljs-keyword">new</span> SuperMap.Geometry.LineString(points1);
</code></pre>
<ul>
<li>Use iConnectorGoogle.js to transfer line1 to gLine of Leaflet format</li>
</ul>
<pre><code class="lang-JavaScript">    <span class="hljs-keyword">var</span> gLine = SuperMap.Web.iConnector.Google.transferLine([line1])[<span class="hljs-number">0</span>];
</code></pre>
<ul>
<li>Draw gLine on the map and set its style</li>
</ul>
<pre><code class="lang-JavaScript">    <span class="hljs-keyword">var</span> options = {strokeColor: <span class="hljs-string">&apos;#FF0000&apos;</span>};
    gLine.setOptions(options);
    gLine.setMap(map);
</code></pre>
<p><strong>Step 5 Draw and Add a SuperMap Region</strong></p>
<ul>
<li>Use SuperMap iClient for JavaScript API to create a new polygon</li>
</ul>
<pre><code class="lang-JavaScript">    <span class="hljs-keyword">var</span> points2 = [
        <span class="hljs-keyword">new</span> SuperMap.Geometry.Point(<span class="hljs-number">116.5</span>,<span class="hljs-number">41.5</span>),
        <span class="hljs-keyword">new</span> SuperMap.Geometry.Point(<span class="hljs-number">115.5</span>,<span class="hljs-number">38.5</span>),
        <span class="hljs-keyword">new</span> SuperMap.Geometry.Point(<span class="hljs-number">118</span>,<span class="hljs-number">40.5</span>),
        <span class="hljs-keyword">new</span> SuperMap.Geometry.Point(<span class="hljs-number">115</span>,<span class="hljs-number">40.5</span>),
        <span class="hljs-keyword">new</span> SuperMap.Geometry.Point(<span class="hljs-number">118</span>,<span class="hljs-number">38.5</span>),
        <span class="hljs-keyword">new</span> SuperMap.Geometry.Point(<span class="hljs-number">116.5</span>,<span class="hljs-number">41.5</span>)
    ];
    <span class="hljs-keyword">var</span> line2 = <span class="hljs-keyword">new</span> SuperMap.Geometry.LinearRing(points2);
    <span class="hljs-keyword">var</span> polygon = <span class="hljs-keyword">new</span> SuperMap.Geometry.Polygon([line2]);
</code></pre>
<ul>
<li>Use iConnectorGoogle.js to transfer line1 to gLine of Leaflet format</li>
</ul>
<pre><code class="lang-JavaScript">    <span class="hljs-keyword">var</span> gPolygon = SuperMap.Web.iConnector.Google.transferPolygon([polygon])[<span class="hljs-number">0</span>];
</code></pre>
<ul>
<li>Draw gPolygon on the map and set its style using Google Maps JS API</li>
</ul>
<pre><code class="lang-JavaScript">    <span class="hljs-keyword">var</span> options = {strokeColor: <span class="hljs-string">&apos;#FF0000&apos;</span>};
    gPolygon.setOptions(options);
    gPolygon.setMap(map);
</code></pre>
<p><strong>Online Demo and Source Code Editing</strong></p>
<p>Here, you can access the source code and see the demo, also you can edit the source code to change the demo.</p>
<ul>
<li><a href="http://runjs.cn/detail/vwwjkoks" target="_blank">Online Demo</a></li>
<li><a href="http://runjs.cn/code/vwwjkoks" target="_blank">Source Code Editing</a></li>
</ul>
<script type="text/javascript">var targetUl = document.getElementsByClassName('page-inner')[0].getElementsByTagName('<ul>')[0];if(targetUl&&targetUl.getElementsByTagName('a').length>0){targetUl.className='atoc';}</script> 

<footer class="page-footer"><span class="copyright">Copyright ©1997-2016 SuperMap Software Co., Ltd. all right reserved，powered by Gitbook</span><span class="footer-modification">Updated: 2016-06-27 10:25:41 AM</span></footer>
                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="./leaflet.html" class="navigation navigation-prev " aria-label="Previous page: 对接 Leaflet"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="./baidu.html" class="navigation navigation-next " aria-label="Next page: 对接百度地图"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="gitbook/app.js"></script>

    
    <script src="gitbook/plugins/gitbook-plugin-splitter/splitter.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-livereload/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"sharing":{"weibo":true,"facebook":true,"twitter":true,"google":false,"instapaper":false,"vk":false,"all":["weibo","facebook","twitter","google","instapaper"]},"search-pro":{"cutWordLib":"nodejieba","defineWord":["The map.","Development"]},"atoc":{"addClass":true,"className":"atoc"},"tbfed-pagefooter":{"copyright":"Copyright&copy; 1997-2016 SuperMap Software Co., Ltd.","modify_label":"Updated:","modify_format":"YYYY-MM-DD HH:mm:ss"},"splitter":{},"highlight":{},"fontsettings":{"theme":"white","family":"sans","size":2},"livereload":{}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
